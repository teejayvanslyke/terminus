<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: PQueue</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">PQueue</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/lib/more/facets/pqueue_rb.html">
                lib/more/facets/pqueue.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h1><a href="PQueue.html">PQueue</a></h1>
<p>
Priority queue with array based heap.
</p>
<p>
A priority queue is like a standard queue, except that each inserted
elements is given a certain priority, based on the result of the comparison
block given at instantiation time. Also, retrieving an element from the
queue will always return the one with the highest priority (see <a
href="PQueue.html#M000755">pop</a> and <a
href="PQueue.html#M000756">top</a>).
</p>
<p>
The default is to compare the elements in repect to their #&gt; method. For
example, Numeric elements with higher values will have higher priorities.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000754">&lt;&lt;</a>&nbsp;&nbsp;
      <a href="#M000769">==</a>&nbsp;&nbsp;
      <a href="#M000761">clear</a>&nbsp;&nbsp;
      <a href="#M000767">each_pop</a>&nbsp;&nbsp;
      <a href="#M000760">empty?</a>&nbsp;&nbsp;
      <a href="#M000766">include?</a>&nbsp;&nbsp;
      <a href="#M000768">inspect</a>&nbsp;&nbsp;
      <a href="#M000758">merge</a>&nbsp;&nbsp;
      <a href="#M000752">new</a>&nbsp;&nbsp;
      <a href="#M000755">pop</a>&nbsp;&nbsp;
      <a href="#M000759">pop_array</a>&nbsp;&nbsp;
      <a href="#M000753">push</a>&nbsp;&nbsp;
      <a href="#M000757">push_all</a>&nbsp;&nbsp;
      <a href="#M000762">replace</a>&nbsp;&nbsp;
      <a href="#M000765">replace_top</a>&nbsp;&nbsp;
      <a href="#M000764">sort</a>&nbsp;&nbsp;
      <a href="#M000763">to_a</a>&nbsp;&nbsp;
      <a href="#M000756">top</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">gt</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
compare <a href="Proc.html">Proc</a>

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">size</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
number of elements

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000752" class="method-detail">
        <a name="M000752"></a>

        <div class="method-heading">
          <a href="#M000752" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(elements=nil) {|a, b| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a <a href="PQueue.html#M000752">new</a> priority queue.
</p>
<p>
If elements are given, build the priority queue with these initial values.
The elements object must respond to <a href="PQueue.html#M000763">to_a</a>.
</p>
<p>
If a block is given, it will be used to determine the priority between the
elements.
</p>
<p>
By default, the priority queue retrieves maximum elements first (using the
#&gt; method).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000752-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000752-source">
<pre>
<span class="ruby-comment cmt"># File lib/more/facets/pqueue.rb, line 62</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">elements</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yields: a, b</span>
    <span class="ruby-ivar">@qarray</span> = [<span class="ruby-keyword kw">nil</span>]
    <span class="ruby-ivar">@size</span> = <span class="ruby-value">0</span>
    <span class="ruby-ivar">@gt</span> = <span class="ruby-identifier">block</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">b</span>}
    <span class="ruby-identifier">replace</span>(<span class="ruby-identifier">elements</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">elements</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000754" class="method-detail">
        <a name="M000754"></a>

        <div class="method-heading">
          <span class="method-name">&lt;&lt;</span><span class="method-args">(v)</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="PQueue.html#M000753">push</a>
</p>
        </div>
      </div>

      <div id="method-M000769" class="method-detail">
        <a name="M000769"></a>

        <div class="method-heading">
          <a href="#M000769" class="method-signature">
          <span class="method-name">==</span><span class="method-args">(other)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return true if the queues contain equal elements.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000769-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000769-source">
<pre>
<span class="ruby-comment cmt"># File lib/more/facets/pqueue.rb, line 287</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)
    <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">to_a</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000761" class="method-detail">
        <a name="M000761"></a>

        <div class="method-heading">
          <a href="#M000761" class="method-signature">
          <span class="method-name">clear</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Remove all elements from the priority queue.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000761-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000761-source">
<pre>
<span class="ruby-comment cmt"># File lib/more/facets/pqueue.rb, line 216</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clear</span>
    <span class="ruby-ivar">@qarray</span>.<span class="ruby-identifier">replace</span>([<span class="ruby-keyword kw">nil</span>])
    <span class="ruby-ivar">@size</span> = <span class="ruby-value">0</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000767" class="method-detail">
        <a name="M000767"></a>

        <div class="method-heading">
          <a href="#M000767" class="method-signature">
          <span class="method-name">each_pop</span><span class="method-args">( {|popped| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Iterate over the ordered elements, destructively.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000767-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000767-source">
<pre>
<span class="ruby-comment cmt"># File lib/more/facets/pqueue.rb, line 271</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">each_pop</span> <span class="ruby-comment cmt">#:yields: popped</span>
    <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">empty?</span>
      <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">pop</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000760" class="method-detail">
        <a name="M000760"></a>

        <div class="method-heading">
          <a href="#M000760" class="method-signature">
          <span class="method-name">empty?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
True if there is no more elements left in the priority queue.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000760-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000760-source">
<pre>
<span class="ruby-comment cmt"># File lib/more/facets/pqueue.rb, line 211</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@size</span>.<span class="ruby-identifier">zero?</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000766" class="method-detail">
        <a name="M000766"></a>

        <div class="method-heading">
          <a href="#M000766" class="method-signature">
          <span class="method-name">include?</span><span class="method-args">(element)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return true if the given object is present in the queue.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000766-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000766-source">
<pre>
<span class="ruby-comment cmt"># File lib/more/facets/pqueue.rb, line 266</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">include?</span>(<span class="ruby-identifier">element</span>)
    <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@qarray</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">element</span>)
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000768" class="method-detail">
        <a name="M000768"></a>

        <div class="method-heading">
          <a href="#M000768" class="method-signature">
          <span class="method-name">inspect</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Pretty print
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000768-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000768-source">
<pre>
<span class="ruby-comment cmt"># File lib/more/facets/pqueue.rb, line 279</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
    <span class="ruby-node">&quot;&lt;#{self.class}: size=#{@size}, top=#{top || &quot;nil&quot;}&gt;&quot;</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000758" class="method-detail">
        <a name="M000758"></a>

        <div class="method-heading">
          <span class="method-name">merge</span><span class="method-args">(elements)</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="PQueue.html#M000757">push_all</a>
</p>
        </div>
      </div>

      <div id="method-M000755" class="method-detail">
        <a name="M000755"></a>

        <div class="method-heading">
          <a href="#M000755" class="method-signature">
          <span class="method-name">pop</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return the element with the highest priority and remove it from the queue.
</p>
<p>
The highest priority is determined by the block given at instanciation
time.
</p>
<p>
The deletion time is O(log n), with n the size of the queue.
</p>
<p>
Return nil if the queue is empty.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000755-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000755-source">
<pre>
<span class="ruby-comment cmt"># File lib/more/facets/pqueue.rb, line 161</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pop</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">res</span> = <span class="ruby-ivar">@qarray</span>[<span class="ruby-value">1</span>]
    <span class="ruby-ivar">@qarray</span>[<span class="ruby-value">1</span>] = <span class="ruby-ivar">@qarray</span>[<span class="ruby-ivar">@size</span>]
    <span class="ruby-ivar">@size</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">downheap</span>(<span class="ruby-value">1</span>)
    <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">res</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000759" class="method-detail">
        <a name="M000759"></a>

        <div class="method-heading">
          <a href="#M000759" class="method-signature">
          <span class="method-name">pop_array</span><span class="method-args">(n=@size)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return <a href="PQueue.html#M000756">top</a> n-element as a sorted array.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000759-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000759-source">
<pre>
<span class="ruby-comment cmt"># File lib/more/facets/pqueue.rb, line 203</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pop_array</span>(<span class="ruby-identifier">n</span>=<span class="ruby-ivar">@size</span>)
    <span class="ruby-identifier">ary</span> = []
    <span class="ruby-identifier">n</span>.<span class="ruby-identifier">times</span>{<span class="ruby-identifier">ary</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">pop</span>)}
    <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">ary</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000753" class="method-detail">
        <a name="M000753"></a>

        <div class="method-heading">
          <a href="#M000753" class="method-signature">
          <span class="method-name">push</span><span class="method-args">(v)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Add an element in the priority queue.
</p>
<p>
The insertion time is O(log n), with n the size of the queue.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000753-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000753-source">
<pre>
<span class="ruby-comment cmt"># File lib/more/facets/pqueue.rb, line 143</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">push</span>(<span class="ruby-identifier">v</span>)
    <span class="ruby-ivar">@size</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
    <span class="ruby-ivar">@qarray</span>[<span class="ruby-ivar">@size</span>] = <span class="ruby-identifier">v</span>
    <span class="ruby-identifier">upheap</span>(<span class="ruby-ivar">@size</span>)
    <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000757" class="method-detail">
        <a name="M000757"></a>

        <div class="method-heading">
          <a href="#M000757" class="method-signature">
          <span class="method-name">push_all</span><span class="method-args">(elements)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Add more than one element at the same time. See <a
href="PQueue.html#M000753">push</a>.
</p>
<p>
The elements object must respond to <a href="PQueue.html#M000763">to_a</a>,
or to be a <a href="PQueue.html">PQueue</a> itself.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000757-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000757-source">
<pre>
<span class="ruby-comment cmt"># File lib/more/facets/pqueue.rb, line 179</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">push_all</span>(<span class="ruby-identifier">elements</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">empty?</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">PQueue</span>)
        <span class="ruby-identifier">initialize_copy</span>(<span class="ruby-identifier">elements</span>)
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">replace</span>(<span class="ruby-identifier">elements</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">PQueue</span>)
        <span class="ruby-ivar">@qarray</span>[<span class="ruby-ivar">@size</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">size</span>] = <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">qarray</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
        <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">size</span>.<span class="ruby-identifier">times</span>{ <span class="ruby-ivar">@size</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>; <span class="ruby-identifier">upheap</span>(<span class="ruby-ivar">@size</span>)}
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">ary</span> = <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">to_a</span>
        <span class="ruby-ivar">@qarray</span>[<span class="ruby-ivar">@size</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">size</span>] = <span class="ruby-identifier">ary</span>
        <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">size</span>.<span class="ruby-identifier">times</span>{ <span class="ruby-ivar">@size</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>; <span class="ruby-identifier">upheap</span>(<span class="ruby-ivar">@size</span>)}
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000762" class="method-detail">
        <a name="M000762"></a>

        <div class="method-heading">
          <a href="#M000762" class="method-signature">
          <span class="method-name">replace</span><span class="method-args">(elements)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Replace the content of the heap by the <a
href="PQueue.html#M000752">new</a> elements.
</p>
<p>
The elements object must respond to <a href="PQueue.html#M000763">to_a</a>,
or to be a <a href="PQueue.html">PQueue</a> itself.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000762-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000762-source">
<pre>
<span class="ruby-comment cmt"># File lib/more/facets/pqueue.rb, line 225</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">replace</span>(<span class="ruby-identifier">elements</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">PQueue</span>)
      <span class="ruby-identifier">initialize_copy</span>(<span class="ruby-identifier">elements</span>)
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-ivar">@qarray</span>.<span class="ruby-identifier">replace</span>([<span class="ruby-keyword kw">nil</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">to_a</span>)
      <span class="ruby-ivar">@size</span> = <span class="ruby-ivar">@qarray</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">heapify</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000765" class="method-detail">
        <a name="M000765"></a>

        <div class="method-heading">
          <a href="#M000765" class="method-signature">
          <span class="method-name">replace_top</span><span class="method-args">(v)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Replace the <a href="PQueue.html#M000756">top</a> element with the given
one, and return this <a href="PQueue.html#M000756">top</a> element.
</p>
<p>
Equivalent to successively calling <a href="PQueue.html#M000755">pop</a>
and push(v).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000765-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000765-source">
<pre>
<span class="ruby-comment cmt"># File lib/more/facets/pqueue.rb, line 251</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">replace_top</span>(<span class="ruby-identifier">v</span>)
    <span class="ruby-comment cmt"># replace top element</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">empty?</span>
      <span class="ruby-ivar">@qarray</span>[<span class="ruby-value">1</span>] = <span class="ruby-identifier">v</span>
      <span class="ruby-ivar">@size</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">res</span> = <span class="ruby-ivar">@qarray</span>[<span class="ruby-value">1</span>]
      <span class="ruby-ivar">@qarray</span>[<span class="ruby-value">1</span>] = <span class="ruby-identifier">v</span>
      <span class="ruby-identifier">downheap</span>(<span class="ruby-value">1</span>)
      <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">res</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000764" class="method-detail">
        <a name="M000764"></a>

        <div class="method-heading">
          <span class="method-name">sort</span><span class="method-args">()</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="PQueue.html#M000763">to_a</a>
</p>
        </div>
      </div>

      <div id="method-M000763" class="method-detail">
        <a name="M000763"></a>

        <div class="method-heading">
          <a href="#M000763" class="method-signature">
          <span class="method-name">to_a</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return a sorted array, with highest priority first.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000763-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000763-source">
<pre>
<span class="ruby-comment cmt"># File lib/more/facets/pqueue.rb, line 237</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_a</span>
    <span class="ruby-identifier">old_qarray</span> = <span class="ruby-ivar">@qarray</span>.<span class="ruby-identifier">dup</span>
    <span class="ruby-identifier">old_size</span> = <span class="ruby-ivar">@size</span>
    <span class="ruby-identifier">res</span> = <span class="ruby-identifier">pop_array</span>
    <span class="ruby-ivar">@qarray</span> = <span class="ruby-identifier">old_qarray</span>
    <span class="ruby-ivar">@size</span> = <span class="ruby-identifier">old_size</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">res</span>
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000756" class="method-detail">
        <a name="M000756"></a>

        <div class="method-heading">
          <a href="#M000756" class="method-signature">
          <span class="method-name">top</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return the element with the highest priority.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000756-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000756-source">
<pre>
<span class="ruby-comment cmt"># File lib/more/facets/pqueue.rb, line 171</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">top</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@qarray</span>[<span class="ruby-value">1</span>]
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>